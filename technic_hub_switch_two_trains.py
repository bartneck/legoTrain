# pybricks blocks file:{"blocks":{"languageVersion":0,"blocks":[{"type":"blockGlobalSetup","id":"bjK,wS1MYO7aiYkFSwd{","x":0,"y":0,"deletable":false,"next":{"block":{"type":"variables_set_technic_hub","id":"y:^iShw?;qfMnc]tgGSa","extraState":{"optionLevel":3},"fields":{"VAR":{"id":"W;sCi:-IDTf,C~o`xDBo"},"FIELDBROADCAST":5,"FIELDOBSERVE0":1},"inputs":{"AXIS_TOP":{"shadow":{"type":"blockParametersAxis","id":"A,=2zy[Wosb3*+q0CCL@","fields":{"VALUE":"z"}}},"AXIS_FRONT":{"shadow":{"type":"blockParametersAxis","id":";j/*lXnm`@Ww(z9gYJ_:","fields":{"VALUE":"x"}}}},"next":{"block":{"type":"variables_set_dc_motor","id":")QU_]^{EV,{%7)5L|5Yl","fields":{"VAR":{"id":"o3xw0d?Eld*Fy7l1F!YT"}},"inputs":{"PORT":{"shadow":{"type":"blockParametersPort","id":":E|mG:2j`_Qn-]do!RZb","fields":{"NAME":"A"}}},"POSITIVE_DIRECTION":{"shadow":{"type":"blockParametersDirection","id":"K+pjt|tq3Ns#o.D6!55C","fields":{"SELECTION":"Direction.COUNTERCLOCKWISE"}}}},"next":{"block":{"type":"variables_setup_any","id":"!sZ|3mLA`(^_#Feho_FB","fields":{"VAR":{"id":"HM)~vl5ii:pnq!sTt^fS"}},"inputs":{"VALUE0":{"shadow":{"type":"blockMathNumber","id":"t2,{wH}dio!Cp6`J@@Bd","fields":{"NUM":0}}}},"next":{"block":{"type":"variables_setup_any","id":"$Tnf~rzVJhF$ZH}r3=|5","fields":{"VAR":{"id":"P300`~S[OhItM]6s;^;%"}},"inputs":{"VALUE0":{"shadow":{"type":"blockMathNumber","id":":e/QqDm`JscGQiJpu+}J","fields":{"NUM":0}}}}}}}}}}}}},{"type":"blockGlobalStart","id":"3tJe|AWl0baN(wH9a$@.","x":0,"y":280,"deletable":false,"next":{"block":{"type":"blockPrint","id":"j,,T}?rBkaW$1v?olp4p","extraState":{"optionLevel":0},"inputs":{"TEXT0":{"shadow":{"type":"text","id":"!x5.0YiWya^`(y)yO5B8","fields":{"TEXT":"Hello, Technic Hub"}}}},"next":{"block":{"type":"blockVariableSetValue","id":"Rhn5N$iMY%]Z`ty+ChV1","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"#:?w560{Ft@]BYZ_9d-s","fields":{"VAR":{"id":"HM)~vl5ii:pnq!sTt^fS","name":"switch_a_position","type":"Any"}}}},"VALUE0":{"shadow":{"type":"blockMathNumber","id":"+43Gfay;%Z6Pjb?:-or|","fields":{"NUM":0}},"block":{"type":"blockTextLiteral","id":"iKVmVp2XUJJN-hE40GBk","fields":{"TEXT":"straight"}}}},"next":{"block":{"type":"blockLightOnColor","id":"UR~7$5khH*p{=zgA{B]Q","extraState":{"optionLevel":1},"fields":{"METHOD":"LIGHT_ON"},"inputs":{"VAR":{"shadow":{"type":"variables_get_color_light_device","id":"e}I:QCpyp?/!55@U%4s%","fields":{"VAR":{"id":"W;sCi:-IDTf,C~o`xDBo","name":"technic hub","type":"TechnicHub"}}}},"COLOR":{"shadow":{"type":"variables_get_color","id":"hX~^Fm+a]Z}ov#d3J5sa","fields":{"COLOUR":"#00ff00","VAR":{"id":"%@}XQYt/;KvJdT(rV31|","name":"green","type":"ColorDef"}}}}},"next":{"block":{"type":"blockFlowWhile","id":":]w5NV7$iDfgzPf;;+G6","fields":{"MODE":"WHILE"},"inputs":{"BOOL":{"shadow":{"type":"blockLogicTrue","id":"+=9{]4$sNmYD%NFvxN;r"}},"DO":{"block":{"type":"blockVariableSetValue","id":"d6KQU!NdSK9e$v3Gd{EP","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"=nqUh}#OQ9p{6x,B6#$q","fields":{"VAR":{"id":"P300`~S[OhItM]6s;^;%","name":"message","type":"Any"}}}},"VALUE0":{"shadow":{"type":"blockMathNumber","id":".yEM*DrdytcXh}9bDTLf","fields":{"NUM":0}},"block":{"type":"blockBleObserve","id":",dFy:$620^KNbDS2MF[v","fields":{"CHANNEL":"1"},"inputs":{"VAR":{"shadow":{"type":"variables_get_ble_hub","id":"FsGX`$5?%Pdj7}5M(A7S","fields":{"VAR":{"id":"W;sCi:-IDTf,C~o`xDBo","name":"technic hub","type":"TechnicHub"}}}}}}}},"next":{"block":{"type":"blockIfElse","id":"UsH=X=xnla:d!=%Bq:./","extraState":{"optionLevel":2},"inputs":{"IF0":{"shadow":{"type":"blockLogicTrue","id":"~nfz/,?~c^$Sfne@(ypY"},"block":{"type":"blockLogicCompare","id":"|M|z94MJZHU;v!|u~kvd","fields":{"OP1":"EQ"},"inputs":{"A":{"shadow":{"type":"blockMathNumber","id":"B7Bn0}Z{hK|V34~h%R`k","fields":{"NUM":3}},"block":{"type":"blockVariableGetValue","id":"[o!!yz^O52xGbn#N8}|;","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"MG:j_Tqd|%?qn3QYx!;_","fields":{"VAR":{"id":"P300`~S[OhItM]6s;^;%","name":"message","type":"Any"}}}}}}},"B":{"shadow":{"type":"blockMathNumber","id":"QmXfuL9Akv)M(GVU4YWC","fields":{"NUM":4}},"block":{"type":"blockTextLiteral","id":":Z6HG7p6ANDC`.T$Tv,G","fields":{"TEXT":"turn"}}}}}},"DO0":{"block":{"type":"blockIfElse","id":"!CrB{d(Qx.n5#?G$vTmp","extraState":{"optionLevel":2},"inputs":{"IF0":{"shadow":{"type":"blockLogicTrue","id":"3InC-#jv{p_dxRc{Fa);"},"block":{"type":"blockLogicCompare","id":"2Uvt6d?y59O;f6p,}#D4","fields":{"OP1":"EQ"},"inputs":{"A":{"shadow":{"type":"blockMathNumber","id":"$qgIy]Mka:`^ZV5_m7pe","fields":{"NUM":3}},"block":{"type":"blockVariableGetValue","id":"|P`7U}a|4[l5ZVwl!8zS","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"QnnnLyn%2|R5|J(Ck*X9","fields":{"VAR":{"id":"HM)~vl5ii:pnq!sTt^fS","name":"switch_a_position","type":"Any"}}}}}}},"B":{"shadow":{"type":"blockMathNumber","id":"L0!uLqI#6LzrZeP0grSJ","fields":{"NUM":4}},"block":{"type":"blockTextLiteral","id":"t*y0JioLsTl=Ow,_Oun,","fields":{"TEXT":"straight"}}}}}},"DO0":{"block":{"type":"blockPrint","id":"w2mc4nWKL-Z/Iyj%HNVm","extraState":{"optionLevel":0},"inputs":{"TEXT0":{"shadow":{"type":"text","id":"hIw6sc8|z|F4~7t]jj.*","fields":{"TEXT":"switch to turn"}}}},"next":{"block":{"type":"blockMotorDuty","id":"JFN~EWEFTf-vb%V^:fRX","inputs":{"VAR":{"shadow":{"type":"variables_get_simple_motor_device","id":"q|wFlo!HY,PWZo!P{_[w","fields":{"VAR":{"id":"o3xw0d?Eld*Fy7l1F!YT","name":"switch_a","type":"DCMotor"}}}},"VALUE0":{"shadow":{"type":"unit_percent","id":":/j@lf|5e8Gaw+Ku/VQ0","fields":{"VALUE0":50}}}},"next":{"block":{"type":"blockWaitTime","id":"/;LtLb#%;v(VywiZC|,N","inputs":{"VALUE0":{"shadow":{"type":"unit_time","id":";OgKR!$GFVy:*43[0Fr`","fields":{"VALUE0":1000}}}},"next":{"block":{"type":"blockMotorStop","id":"sdZ~#`z9vqbaG!|or@rJ","inputs":{"VAR":{"shadow":{"type":"variables_get_simple_motor_device","id":"r.rVrEHe]WQO`DNv.:c~","fields":{"VAR":{"id":"o3xw0d?Eld*Fy7l1F!YT","name":"switch_a","type":"DCMotor"}}}},"VALUE0":{"shadow":{"type":"parameters_stop_3","id":"yiwgq=o^07RCT|9@SU8g","fields":{"VALUE":"Stop.BRAKE"}}}},"next":{"block":{"type":"blockVariableSetValue","id":"3suw?SfMF(-0tz-7P}/n","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"pp!+y@(cAZXE0!/ukGKy","fields":{"VAR":{"id":"HM)~vl5ii:pnq!sTt^fS","name":"switch_a_position","type":"Any"}}}},"VALUE0":{"shadow":{"type":"blockMathNumber","id":"+43Gfay;%Z6Pjb?:-or|","fields":{"NUM":0}},"block":{"type":"blockTextLiteral","id":"*`KgW,W^}C7qi,BcqWDT","fields":{"TEXT":"turn"}}}},"next":{"block":{"type":"blockLightOnColor","id":"ano+JF?4Jc;kA1SC`V%`","extraState":{"optionLevel":1},"fields":{"METHOD":"LIGHT_ON"},"inputs":{"VAR":{"shadow":{"type":"variables_get_color_light_device","id":")hd%%[oTaFyP[_ewJtM)","fields":{"VAR":{"id":"W;sCi:-IDTf,C~o`xDBo","name":"technic hub","type":"TechnicHub"}}}},"COLOR":{"shadow":{"type":"variables_get_color","id":"7pyi18fV}CAOhm^(5HJB","fields":{"COLOUR":"#ff0000","VAR":{"id":"CH;2*~g$OdT,gilqc6{3","name":"red","type":"ColorDef"}}}}}}}}}}}}}}}}},"IF1":{"shadow":{"type":"blockLogicTrue","id":"9Dea@]A/XyMXT@%myHKD"},"block":{"type":"blockLogicCompare","id":"gBO:~h5e2qY:nzUL9oIE","fields":{"OP1":"EQ"},"inputs":{"A":{"shadow":{"type":"blockMathNumber","id":"ZR[|+09@9fOs!QV{-8#U","fields":{"NUM":3}},"block":{"type":"blockVariableGetValue","id":"*3ubK}8,MnRg|S[`,kC-","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"kda~O5+XAl_X5wagNGV~","fields":{"VAR":{"id":"HM)~vl5ii:pnq!sTt^fS","name":"switch_a_position","type":"Any"}}}}}}},"B":{"shadow":{"type":"blockMathNumber","id":"QmXfuL9Akv)M(GVU4YWC","fields":{"NUM":4}},"block":{"type":"blockTextLiteral","id":"2GAah:rw|4IFeFyaYSP=","fields":{"TEXT":"turn"}}}}}},"DO1":{"block":{"type":"blockComment","id":"YjjDH[xA*dK?fUk!_jxS","fields":{"FIELDNAME":"no change necessary"}}}}}},"IF1":{"shadow":{"type":"blockLogicTrue","id":"!ad]-JqJAT7}/Y8s%n{U"},"block":{"type":"blockLogicCompare","id":"Vt{B(?C3p;#m5;-hRXSn","fields":{"OP1":"EQ"},"inputs":{"A":{"shadow":{"type":"blockMathNumber","id":"K)UJa=QWXL`US7Da%~y4","fields":{"NUM":3}},"block":{"type":"blockVariableGetValue","id":"0|qeT6Nqw~*nQY{|L7Cj","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"1/ZZTQ64{Vl9fGg6iqr7","fields":{"VAR":{"id":"P300`~S[OhItM]6s;^;%","name":"message","type":"Any"}}}}}}},"B":{"shadow":{"type":"blockMathNumber","id":"a(rd2]-5wgS3O1O[Q!V~","fields":{"NUM":4}},"block":{"type":"blockTextLiteral","id":"EaPWS!LjkcQ:B([8{O{s","fields":{"TEXT":"straight"}}}}}},"DO1":{"block":{"type":"blockIfElse","id":"1p^i4IF-lnc=|M|2:5xp","extraState":{"optionLevel":2},"inputs":{"IF0":{"shadow":{"type":"blockLogicTrue","id":"3InC-#jv{p_dxRc{Fa);"},"block":{"type":"blockLogicCompare","id":"MkwG?FOX`:yC5Rl9{K2G","fields":{"OP1":"EQ"},"inputs":{"A":{"shadow":{"type":"blockMathNumber","id":"$qgIy]Mka:`^ZV5_m7pe","fields":{"NUM":3}},"block":{"type":"blockVariableGetValue","id":"r#n]`32~mRW{KkT)U(4a","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"Yh]@F%Tp]1^A3,G`;pco","fields":{"VAR":{"id":"HM)~vl5ii:pnq!sTt^fS","name":"switch_a_position","type":"Any"}}}}}}},"B":{"shadow":{"type":"blockMathNumber","id":"L0!uLqI#6LzrZeP0grSJ","fields":{"NUM":4}},"block":{"type":"blockTextLiteral","id":"ox)+WKwgA~f`zSeDQOmd","fields":{"TEXT":"turn"}}}}}},"DO0":{"block":{"type":"blockPrint","id":"j,rOysp%Xvl]zldydrUy","extraState":{"optionLevel":0},"inputs":{"TEXT0":{"shadow":{"type":"text","id":"UzoFNBRP9TeDgAqwZ_a7","fields":{"TEXT":"switch to straight"}}}},"next":{"block":{"type":"blockMotorDuty","id":"-^:{^+~KK8Tvl~,i-sSc","inputs":{"VAR":{"shadow":{"type":"variables_get_simple_motor_device","id":"cEup:JqYd|V:l2uzAuwK","fields":{"VAR":{"id":"o3xw0d?Eld*Fy7l1F!YT","name":"switch_a","type":"DCMotor"}}}},"VALUE0":{"shadow":{"type":"unit_percent","id":"UCoAgvivdXHb]^mStHtO","fields":{"VALUE0":-50}}}},"next":{"block":{"type":"blockWaitTime","id":"pBGl`Aa9:~AMfpV2zrz7","inputs":{"VALUE0":{"shadow":{"type":"unit_time","id":"c*D$2ceqKrgRL;U}DK.~","fields":{"VALUE0":1000}}}},"next":{"block":{"type":"blockMotorStop","id":"pGqDQmI2uxP]EiZ?J/{E","inputs":{"VAR":{"shadow":{"type":"variables_get_simple_motor_device","id":"0PCzUd)@.Dc10[2D*uLW","fields":{"VAR":{"id":"o3xw0d?Eld*Fy7l1F!YT","name":"switch_a","type":"DCMotor"}}}},"VALUE0":{"shadow":{"type":"parameters_stop_3","id":"i_/tQ`6THbdc!%Z=_#xY","fields":{"VALUE":"Stop.BRAKE"}}}},"next":{"block":{"type":"blockVariableSetValue","id":"N/yqkRO(Hfx~o*!KA`X|","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"477d:y)q9IBh7w2V)tr+","fields":{"VAR":{"id":"HM)~vl5ii:pnq!sTt^fS","name":"switch_a_position","type":"Any"}}}},"VALUE0":{"shadow":{"type":"blockMathNumber","id":"+43Gfay;%Z6Pjb?:-or|","fields":{"NUM":0}},"block":{"type":"blockTextLiteral","id":"O-=F/-,$nK%}AJX!?%uo","fields":{"TEXT":"straight"}}}},"next":{"block":{"type":"blockLightOnColor","id":"Icu~s`LmPJTNUi/OcNO7","extraState":{"optionLevel":1},"fields":{"METHOD":"LIGHT_ON"},"inputs":{"VAR":{"shadow":{"type":"variables_get_color_light_device","id":"`5eiH0u#I-^[Rss+tZz$","fields":{"VAR":{"id":"W;sCi:-IDTf,C~o`xDBo","name":"technic hub","type":"TechnicHub"}}}},"COLOR":{"shadow":{"type":"variables_get_color","id":")*=ls;i|xj)I0[~{qkC:","fields":{"COLOUR":"#00ff00","VAR":{"id":"%@}XQYt/;KvJdT(rV31|","name":"green","type":"ColorDef"}}}}}}}}}}}}}}}}},"IF1":{"shadow":{"type":"blockLogicTrue","id":"`,L`}R5|KF|gO2~/sAqK"},"block":{"type":"blockLogicCompare","id":"i!uLI#7-%5eW-?:5]IwV","fields":{"OP1":"EQ"},"inputs":{"A":{"shadow":{"type":"blockMathNumber","id":"ZR[|+09@9fOs!QV{-8#U","fields":{"NUM":3}},"block":{"type":"blockVariableGetValue","id":"cLZxl#!y[k2nwcR=[G3M","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"$txBuT+5AboNru[2OitT","fields":{"VAR":{"id":"HM)~vl5ii:pnq!sTt^fS","name":"switch_a_position","type":"Any"}}}}}}},"B":{"shadow":{"type":"blockMathNumber","id":"QmXfuL9Akv)M(GVU4YWC","fields":{"NUM":4}},"block":{"type":"blockTextLiteral","id":"@wCy(VAA~;zZI`wBE9z|","fields":{"TEXT":"straight"}}}}}},"DO1":{"block":{"type":"blockComment","id":"8G9M07/+?NvBKRgBiInM","fields":{"FIELDNAME":"no change necessary"}}}}}}}}}}}}}}}}}}}}},{"type":"blockTextLiteral","id":"s)$0rUfhyXdYlu@d4`O.","x":0,"y":2428,"enabled":false,"fields":{"TEXT":""}},{"type":"blockNone","id":"fHF_6/D!QE2BH1#:*U@x","x":0,"y":2340,"enabled":false}]},"variables":[{"name":"red","id":"CH;2*~g$OdT,gilqc6{3","type":"ColorDef"},{"name":"orange","id":"!Q,oWcI3YXUsK/InbdNV","type":"ColorDef"},{"name":"yellow","id":"/J}SZY6*d/+~e+K7=m{S","type":"ColorDef"},{"name":"green","id":"%@}XQYt/;KvJdT(rV31|","type":"ColorDef"},{"name":"cyan","id":"2kkFV1nTpQ4EiUS?@}@R","type":"ColorDef"},{"name":"blue","id":"f,Y+8rnjsU7hB|^1*Ew@","type":"ColorDef"},{"name":"violet","id":"Vvr=hJ0(m+$,v,=|DS.,","type":"ColorDef"},{"name":"magenta","id":".fUM%V/?qj,ENQqcbQzk","type":"ColorDef"},{"name":"white","id":"7P$Deg;o*LqcZPM/G)eF","type":"ColorDef"},{"name":"none","id":"5m5:|[i/^`k,.(+]*ud9","type":"ColorDef"},{"name":"technic hub","id":"W;sCi:-IDTf,C~o`xDBo","type":"TechnicHub"},{"name":"switch_a","id":"o3xw0d?Eld*Fy7l1F!YT","type":"DCMotor"},{"name":"switch_a_position","id":"HM)~vl5ii:pnq!sTt^fS","type":"Any"},{"name":"message","id":"P300`~S[OhItM]6s;^;%","type":"Any"}],"info":{"type":"pybricks","version":"1.2.3"}}
from pybricks.hubs import TechnicHub
from pybricks.parameters import Axis, Color, Direction, Port
from pybricks.pupdevices import DCMotor
from pybricks.tools import wait

# Set up all devices.
technic_hub = TechnicHub(top_side=Axis.Z, front_side=Axis.X, broadcast_channel=5, observe_channels=[1])
switch_a = DCMotor(Port.A, Direction.COUNTERCLOCKWISE)

# Initialize variables.
switch_a_position = 0
message = 0


# The main program starts here.
print('Hello, Technic Hub')
switch_a_position = 'straight'
technic_hub.light.on(Color.GREEN)
while True:
    message = technic_hub.ble.observe(1)
    if message == 'turn':
        if switch_a_position == 'straight':
            print('switch to turn')
            switch_a.dc(50)
            wait(1000)
            switch_a.brake()
            switch_a_position = 'turn'
            technic_hub.light.on(Color.RED)
        elif switch_a_position == 'turn':
            # no change necessary
            pass
        else:
            pass
    elif message == 'straight':
        if switch_a_position == 'turn':
            print('switch to straight')
            switch_a.dc(-50)
            wait(1000)
            switch_a.brake()
            switch_a_position = 'straight'
            technic_hub.light.on(Color.GREEN)
        elif switch_a_position == 'straight':
            # no change necessary
            pass
        else:
            pass
    else:
        pass
