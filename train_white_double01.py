# pybricks blocks file:{"blocks":{"languageVersion":0,"blocks":[{"type":"blockGlobalSetup","id":"bjK,wS1MYO7aiYkFSwd{","x":0,"y":0,"deletable":false,"next":{"block":{"type":"variables_set_city_hub","id":"Z=~KDFRsz(|Fy5(27][N","extraState":{"optionLevel":2},"fields":{"VAR":{"id":"1}YO:A)/19FHF9r}-jR,"},"FIELDBROADCAST":1,"FIELDOBSERVE0":3},"next":{"block":{"type":"variables_set_dc_motor","id":"PrujFa60nesb[pO|U=9z","fields":{"VAR":{"id":"941ig0ALUh8`0[_PUfg1"}},"inputs":{"PORT":{"shadow":{"type":"blockParametersPort","id":"@l.qLd#G+[l/E|-~c,}S","fields":{"NAME":"A"}}},"POSITIVE_DIRECTION":{"shadow":{"type":"blockParametersDirection","id":"5(R6*JfL6T_?*@~8@9;}","fields":{"SELECTION":"Direction.CLOCKWISE"}}}},"next":{"block":{"type":"variables_setup_color","id":".[Y9D8,^}|)]YtRcs9k9","fields":{"VAR":{"id":"~P^p+D;l#Veq/ovN=iQv"},"COLOUR":"#c70a10"},"inputs":{"HUE":{"shadow":{"type":"unit_angle","id":"lKCC(d{zbT`E7OMzxd[4","fields":{"VALUE0":358}}},"SATURATION":{"shadow":{"type":"unit_percent","id":".0^{8_7Ks/wdUdszL?C+","fields":{"VALUE0":95}}},"VALUE":{"shadow":{"type":"unit_percent","id":"A2J_1dYMx`n#95xn72U!","fields":{"VALUE0":78}}}},"next":{"block":{"type":"variables_setup_color","id":":F$0Y#q{P]^$JM)ANhfh","fields":{"VAR":{"id":"Z(AXa1:s3-?M[W0vwv%V"},"COLOUR":"#0b7d2d"},"inputs":{"HUE":{"shadow":{"type":"unit_angle","id":"M^eu`|tUG;4=pU]DR^:Z","fields":{"VALUE0":138}}},"SATURATION":{"shadow":{"type":"unit_percent","id":"C5Gxdwq^lnRf$7/2kuWM","fields":{"VALUE0":91}}},"VALUE":{"shadow":{"type":"unit_percent","id":"I;0QGg@s}HG,eIea~o0r","fields":{"VALUE0":49}}}},"next":{"block":{"type":"variables_setup_color","id":"bG[I_q~0WfSSO-V$GB!S","fields":{"VAR":{"id":"$prsn|t%(sJ(hshPLX.G"},"COLOUR":"#0c47b3"},"inputs":{"HUE":{"shadow":{"type":"unit_angle","id":"yk46kJ2=AGJB9|xUcmT~","fields":{"VALUE0":219}}},"SATURATION":{"shadow":{"type":"unit_percent","id":"$}~xP2]t,+7gtljA,GYD","fields":{"VALUE0":93}}},"VALUE":{"shadow":{"type":"unit_percent","id":"sMy:W,XM[{H;=mzlK}^_","fields":{"VALUE0":70}}}},"next":{"block":{"type":"variables_setup_color","id":"m8Mj)33^WX[YZMr$p2-@","fields":{"VAR":{"id":"QG4=np+HX1:b6u4Or~u~"},"COLOUR":"#294542"},"inputs":{"HUE":{"shadow":{"type":"unit_angle","id":"zoHWBw9Va4$rnp+W:XU%","fields":{"VALUE0":173}}},"SATURATION":{"shadow":{"type":"unit_percent","id":"Sz_KPI;4kigXWOZE74VH","fields":{"VALUE0":40}}},"VALUE":{"shadow":{"type":"unit_percent","id":"RTI^a]`QaGT=b0[rd|I3","fields":{"VALUE0":27}}}},"next":{"block":{"type":"variables_setup_color","id":"r+gC-V(s]9TZ)L]{|*=2","fields":{"VAR":{"id":"rCw8;LVkk?xZTYgg!Gw8"},"COLOUR":"#735550"},"inputs":{"HUE":{"shadow":{"type":"unit_angle","id":"~MCiVHc[~vo@!xm7:g7}","fields":{"VALUE0":9}}},"SATURATION":{"shadow":{"type":"unit_percent","id":"L#5}n$WIidM2sNe`LQk:","fields":{"VALUE0":30}}},"VALUE":{"shadow":{"type":"unit_percent","id":":[2uhP!8.W-2,LDr,g/A","fields":{"VALUE0":45}}}},"next":{"block":{"type":"variables_set_color_sensor","id":"wj}C,3AS-*(t~%V?9~wy","extraState":{"optionLevel":5},"fields":{"VAR":{"id":"oqaorV6y+Pgm@d-xKJXQ"}},"inputs":{"PORT":{"shadow":{"type":"blockParametersPort","id":"8)vBd1=t)U%mI:I6:p9E","fields":{"NAME":"B"}}},"COLOR0":{"shadow":{"type":"variables_get_color","id":"f#w,!?ke8aqa79LWI!{0","fields":{"COLOUR":"#c70a10","VAR":{"id":"~P^p+D;l#Veq/ovN=iQv","name":"red_tile","type":"ColorDef"}}}},"COLOR1":{"shadow":{"type":"variables_get_color","id":"|i@m[zU`Tqp#As_g0wLy","fields":{"COLOUR":"#0b7d2d","VAR":{"id":"Z(AXa1:s3-?M[W0vwv%V","name":"green_tile","type":"ColorDef"}}}},"COLOR2":{"shadow":{"type":"variables_get_color","id":"9%sFGfTPA6!K5O(-78zZ","fields":{"COLOUR":"#0c47b3","VAR":{"id":"$prsn|t%(sJ(hshPLX.G","name":"blue_tile","type":"ColorDef"}}}},"COLOR3":{"shadow":{"type":"variables_get_color","id":";-^@1v1}B}JKURIGSaS:","fields":{"COLOUR":"#294542","VAR":{"id":"QG4=np+HX1:b6u4Or~u~","name":"track","type":"ColorDef"}}}},"COLOR4":{"shadow":{"type":"variables_get_color","id":"!,jn33|}ZGXAF5GhAVQ)","fields":{"COLOUR":"#735550","VAR":{"id":"rCw8;LVkk?xZTYgg!Gw8","name":"floor","type":"ColorDef"}}}}},"next":{"block":{"type":"variables_setup_any","id":"]A7NY^2RC#R0mm:dI;@~","fields":{"VAR":{"id":"Z)*/u3i9XouLD2a]bR0t"}},"inputs":{"VALUE0":{"shadow":{"type":"blockMathNumber","id":"ED)*8m9_3[/uD3Ik2lTy","fields":{"NUM":0}}}},"next":{"block":{"type":"variables_setup_any","id":"J{0qV6(Amfc7!g3LO.p:","fields":{"VAR":{"id":"Nv1[*LFg.~TO=VJ(}rCc"}},"inputs":{"VALUE0":{"shadow":{"type":"blockMathNumber","id":"LDue+3-P5{^?:rl85TY`","fields":{"NUM":0}}}}}}}}}}}}}}}}}}}}}}}}},{"type":"blockGlobalStart","id":"3tJe|AWl0baN(wH9a$@.","x":-8,"y":557,"deletable":false,"next":{"block":{"type":"blockPrint","id":"j,,T}?rBkaW$1v?olp4p","extraState":{"optionLevel":0},"inputs":{"TEXT0":{"shadow":{"type":"text","id":"!x5.0YiWya^`(y)yO5B8","fields":{"TEXT":"Hello, white train!"}}}},"next":{"block":{"type":"blockLightOnColor","id":"A$Vu,5:c.+hn48IMM7um","extraState":{"optionLevel":1},"fields":{"METHOD":"LIGHT_ON"},"inputs":{"VAR":{"shadow":{"type":"variables_get_color_light_device","id":"rDVDDdJlxy.bl/x)c8Y)","fields":{"VAR":{"id":"1}YO:A)/19FHF9r}-jR,","name":"white_train","type":"CityHub"}}}},"COLOR":{"shadow":{"type":"variables_get_color","id":"+xD88zGxT;mja)SMuB?d","fields":{"COLOUR":"#00ff00","VAR":{"id":"TOOCKpWek)VTDJ/l^SOv","name":"green","type":"ColorDef"}}}}},"next":{"block":{"type":"blockMotorDuty","id":"^gwV-az/u}YgnptB~z}=","inputs":{"VAR":{"shadow":{"type":"variables_get_simple_motor_device","id":"Ar._mboa[W9nw1A)l8c]","fields":{"VAR":{"id":"941ig0ALUh8`0[_PUfg1","name":"train_motor","type":"DCMotor"}}}},"VALUE0":{"shadow":{"type":"unit_percent","id":"*XOiq-XPV7LJFZ7uA?]3","fields":{"VALUE0":50}}}},"next":{"block":{"type":"blockVariableSetValue","id":"+o;KS:G[VlZ0SQ~4~m]L","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"jK$B:.J?3b!z=pEWnb+,","fields":{"VAR":{"id":"Nv1[*LFg.~TO=VJ(}rCc","name":"round","type":"Any"}}}},"VALUE0":{"shadow":{"type":"blockMathNumber","id":"?ZUqvF7ueIit#p4^KNI,","fields":{"NUM":0}},"block":{"type":"blockTextLiteral","id":"N/2a~]{jH0bcESqsnCe5","fields":{"TEXT":"not_started"}}}},"next":{"block":{"type":"blockBleBroadcast","id":"hIB91/v3AV){}He-cWAm","inputs":{"VAR":{"shadow":{"type":"variables_get_ble_hub","id":"GkLYUgYHCxdx]LTVNV)v","fields":{"VAR":{"id":"1}YO:A)/19FHF9r}-jR,","name":"white_train","type":"CityHub"}}}},"VALUE0":{"shadow":{"type":"blockMathNumber","id":"Mg+B}Bk@BGH[bU=a0i4F","fields":{"NUM":0}},"block":{"type":"blockTextLiteral","id":"p)|ZqMjg|)d]b!,qCGF#","fields":{"TEXT":"turn"}}}},"next":{"block":{"type":"blockMultiTask","id":"OlcZRq2D6hH?v:jy@O?W","extraState":{"optionLevel":0},"fields":{"METHOD":"MULTITASK_ALL"},"inputs":{"TASK0":{"block":{"type":"blockFlowWhile","id":"%%HBm)(yz.?ob5RL^w0K","fields":{"MODE":"WHILE"},"inputs":{"BOOL":{"shadow":{"type":"blockLogicTrue","id":"gJ;.Qtc7#lMsnW|U3PXN"}},"DO":{"block":{"type":"blockVariableSetValue","id":"c;:Vy=0b0SyhzQxu=x+b","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":":.okO_NIt=-ze$0%B6wY","fields":{"VAR":{"id":"Z)*/u3i9XouLD2a]bR0t","name":"message_receive","type":"Any"}}}},"VALUE0":{"shadow":{"type":"blockMathNumber","id":"uD$?UUdM%l:buHnSw0u~","fields":{"NUM":0}},"block":{"type":"blockBleObserve","id":"D=?zS[VdNV|(!|T|n;/B","fields":{"CHANNEL":"3"},"inputs":{"VAR":{"shadow":{"type":"variables_get_ble_hub","id":"0QvDf54;L^!KP+!Wyxh*","fields":{"VAR":{"id":"1}YO:A)/19FHF9r}-jR,","name":"white_train","type":"CityHub"}}}}}}}},"next":{"block":{"type":"blockIfElse","id":"P?P0BP(Mt~-((K1y;20G","extraState":{"optionLevel":1},"inputs":{"IF0":{"shadow":{"type":"blockLogicTrue","id":"aj`mUYhhzvfDInu$5;R*"},"block":{"type":"blockLogicCompare","id":"q}7RDO+QLVf2sSGc+M{s","fields":{"OP1":"EQ"},"inputs":{"A":{"shadow":{"type":"blockMathNumber","id":"1Rz=;^H{HwF@M30b/47;","fields":{"NUM":3}},"block":{"type":"blockVariableGetValue","id":"I1Au%|MRhb6V5$25ABK]","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"VV8ci298GByX(?i7FL96","fields":{"VAR":{"id":"Z)*/u3i9XouLD2a]bR0t","name":"message_receive","type":"Any"}}}}}}},"B":{"shadow":{"type":"blockMathNumber","id":"aM@=!t[py|j0d!(xIML{","fields":{"NUM":4}},"block":{"type":"blockTextLiteral","id":"~$Sh=j@.0~AB~+L.Twaw","fields":{"TEXT":"start"}}}}}},"DO0":{"block":{"type":"blockIfElse","id":"zA;*foizJjeds,h9N$JW","extraState":{"optionLevel":1},"inputs":{"IF0":{"shadow":{"type":"blockLogicTrue","id":"/;0JTs6+RSxWG}Iqn/,!"},"block":{"type":"blockLogicCompare","id":"ru!x-ub`Jsjx9[!6k+@9","fields":{"OP1":"EQ"},"inputs":{"A":{"shadow":{"type":"blockMathNumber","id":"-@tv0P+t`JAuE*W39;O|","fields":{"NUM":3}},"block":{"type":"blockVariableGetValue","id":"@IOXpR==VEDi/)aeq{vQ","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"i{:2I`XM:9$t0f`^5hs/","fields":{"VAR":{"id":"Nv1[*LFg.~TO=VJ(}rCc","name":"round","type":"Any"}}}}}}},"B":{"shadow":{"type":"blockMathNumber","id":"K{3iF|R;/Ay%/-y|`fy[","fields":{"NUM":4}},"block":{"type":"blockTextLiteral","id":"Wn0IlA4+P@ExbkV*1w4B","fields":{"TEXT":"not_started"}}}}}},"DO0":{"block":{"type":"blockMotorDuty","id":"uz(DwPf5iR7{6Y.3^%@[","inputs":{"VAR":{"shadow":{"type":"variables_get_simple_motor_device","id":"ulL6}VtpP^%vZM+sFsO9","fields":{"VAR":{"id":"941ig0ALUh8`0[_PUfg1","name":"train_motor","type":"DCMotor"}}}},"VALUE0":{"shadow":{"type":"unit_percent","id":"}~8q;s4ZV~IrT)[pPdBb","fields":{"VALUE0":50}}}},"next":{"block":{"type":"blockVariableSetValue","id":"WGHteWKrxu{_m!/^}wY-","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"J!le$w7?8mc_TU]sQoLL","fields":{"VAR":{"id":"Nv1[*LFg.~TO=VJ(}rCc","name":"round","type":"Any"}}}},"VALUE0":{"shadow":{"type":"blockMathNumber","id":"?ZUqvF7ueIit#p4^KNI,","fields":{"NUM":0}},"block":{"type":"blockTextLiteral","id":"Ky[h_9zd|OE*U7YY~E0~","fields":{"TEXT":"red_round"}}}},"next":{"block":{"type":"blockBleBroadcast","id":"m;tPf@zrjas0#j[OP2EV","inputs":{"VAR":{"shadow":{"type":"variables_get_ble_hub","id":"/T{3L]~?*p`MFNy,zTi=","fields":{"VAR":{"id":"1}YO:A)/19FHF9r}-jR,","name":"white_train","type":"CityHub"}}}},"VALUE0":{"shadow":{"type":"blockMathNumber","id":"Mg+B}Bk@BGH[bU=a0i4F","fields":{"NUM":0}},"block":{"type":"blockTextLiteral","id":",8A5Q0S8O8c?V=O`S*Or","fields":{"TEXT":"turn"}}}}}}}}}}}}}}}}}}}}},"TASK1":{"block":{"type":"blockFlowWhile","id":"krYD,-kD`{iM)ZPE|Imn","fields":{"MODE":"WHILE"},"inputs":{"BOOL":{"shadow":{"type":"blockLogicTrue","id":"rwF(yna()Wg*:*QwvuJM"}},"DO":{"block":{"type":"blockIfElse","id":"-qqC2fb#u;Z-B}36x(tI","extraState":{"optionLevel":3},"inputs":{"IF0":{"shadow":{"type":"blockLogicTrue","id":"UW^mX~uLTY0par*(ld]0"},"block":{"type":"blockLogicCompare","id":"?-q=073hsCvOFsCHCsXO","fields":{"OP1":"EQ"},"inputs":{"A":{"shadow":{"type":"blockMathNumber","id":",:Kaun(5cB?jdj*70H@;","fields":{"NUM":0}},"block":{"type":"blockColor","id":"oQ%,RwV$3t{ruLf{xR6L","extraState":{"optionLevel":0},"fields":{"METHOD":"COLOR_GET_COLOR"},"inputs":{"VAR":{"shadow":{"type":"variables_get_color_device","id":"zw]gi=3+TUTzzfcID9xb","fields":{"VAR":{"id":"oqaorV6y+Pgm@d-xKJXQ","name":"color sensor","type":"ColorSensor"}}}}}}},"B":{"shadow":{"type":"blockMathNumber","id":"n=y;6#(%Ye#{h_y(~ESv","fields":{"NUM":0}},"block":{"type":"variables_get_color","id":"M4oM[ZGvnpxkdL{K)_C^","fields":{"COLOUR":"#0c47b3","VAR":{"id":"$prsn|t%(sJ(hshPLX.G"}}}}}}},"DO0":{"block":{"type":"blockIfElse","id":"t]}CN@dmX0/`mldZI=%o","extraState":{"optionLevel":3},"inputs":{"IF0":{"shadow":{"type":"blockLogicTrue","id":"T}5NRJZ.Ze-lE_3Eue6f"},"block":{"type":"blockLogicCompare","id":"gP/91Y5H#Q^[mNaU?F,.","fields":{"OP1":"EQ"},"inputs":{"A":{"shadow":{"type":"blockMathNumber","id":"sBRIn7qzxIUIM7TDiP$H","fields":{"NUM":3}},"block":{"type":"blockVariableGetValue","id":"ikUFox$-oZm;KCVbJ*Bc","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"Zoo}os{D;P`%}PTwKTcI","fields":{"VAR":{"id":"Nv1[*LFg.~TO=VJ(}rCc","name":"round","type":"Any"}}}}}}},"B":{"shadow":{"type":"blockMathNumber","id":"$5:R}//j[#@45:B_r5W~","fields":{"NUM":4}},"block":{"type":"blockTextLiteral","id":"]UNPsHTmgiK8kTLW?3iJ","fields":{"TEXT":"red_round"}}}}}},"DO0":{"block":{"type":"blockBleBroadcast","id":"oU3GK4]0t{y~0S#NpKD{","inputs":{"VAR":{"shadow":{"type":"variables_get_ble_hub","id":"+FkHgcm9$iaG7!:dMb|3","fields":{"VAR":{"id":"1}YO:A)/19FHF9r}-jR,","name":"white_train","type":"CityHub"}}}},"VALUE0":{"shadow":{"type":"blockMathNumber","id":"Mg+B}Bk@BGH[bU=a0i4F","fields":{"NUM":0}},"block":{"type":"blockTextLiteral","id":"Qp#%.N4I=VhK0X+u^eO7","fields":{"TEXT":"straight"}}}}}},"IF1":{"shadow":{"type":"blockLogicTrue","id":"61l8HXwB{;@GSR.Q^?@C"},"block":{"type":"blockLogicCompare","id":"x9B=}/x[A,Fp6WekF{OI","fields":{"OP1":"EQ"},"inputs":{"A":{"shadow":{"type":"blockMathNumber","id":"sBRIn7qzxIUIM7TDiP$H","fields":{"NUM":3}},"block":{"type":"blockVariableGetValue","id":"tBq[-:*k/blh{NW-Pdpb","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"qUvEKPZgF9+Qa]l_I~BR","fields":{"VAR":{"id":"Nv1[*LFg.~TO=VJ(}rCc","name":"round","type":"Any"}}}}}}},"B":{"shadow":{"type":"blockMathNumber","id":"$5:R}//j[#@45:B_r5W~","fields":{"NUM":4}},"block":{"type":"blockTextLiteral","id":"nzVcJ#XdQnmdO3`_Pcfy","fields":{"TEXT":"green_round"}}}}}},"DO1":{"block":{"type":"blockBleBroadcast","id":"P%S~@@^cDuLaKwl3W6Mk","inputs":{"VAR":{"shadow":{"type":"variables_get_ble_hub","id":"|Xrq?hy.#53!O./W4}b+","fields":{"VAR":{"id":"1}YO:A)/19FHF9r}-jR,","name":"white_train","type":"CityHub"}}}},"VALUE0":{"shadow":{"type":"blockMathNumber","id":"Mg+B}Bk@BGH[bU=a0i4F","fields":{"NUM":0}},"block":{"type":"blockTextLiteral","id":":cDH+0W^!T+vp$y-D+HJ","fields":{"TEXT":"start"}}}}}},"IF2":{"shadow":{"type":"blockLogicTrue","id":"5|_1XuXZ(!daQF@uszzW"},"block":{"type":"blockLogicCompare","id":"1/j?2P,a:{cs.`Y^}4}a","fields":{"OP1":"EQ"},"inputs":{"A":{"shadow":{"type":"blockMathNumber","id":"sBRIn7qzxIUIM7TDiP$H","fields":{"NUM":3}},"block":{"type":"blockVariableGetValue","id":"/`w;g|DAsjK,s|hxF%*N","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"FksgQj.oa!,N8jWO@;jP","fields":{"VAR":{"id":"Nv1[*LFg.~TO=VJ(}rCc","name":"round","type":"Any"}}}}}}},"B":{"shadow":{"type":"blockMathNumber","id":"$5:R}//j[#@45:B_r5W~","fields":{"NUM":4}},"block":{"type":"blockTextLiteral","id":"Q?u3l;1j]a4wj$$OTz?O","fields":{"TEXT":"not_started"}}}}}},"DO2":{"block":{"type":"blockBleBroadcast","id":"~DCixSI;yF4}4[B4tpA}","inputs":{"VAR":{"shadow":{"type":"variables_get_ble_hub","id":"Y#I/ZYted!d#,$EL#IXb","fields":{"VAR":{"id":"1}YO:A)/19FHF9r}-jR,","name":"white_train","type":"CityHub"}}}},"VALUE0":{"shadow":{"type":"blockMathNumber","id":"Mg+B}Bk@BGH[bU=a0i4F","fields":{"NUM":0}},"block":{"type":"blockTextLiteral","id":"DT(#.EJV3x:%/W6Vi3f8","fields":{"TEXT":"start"}}}}}}}}},"IF1":{"shadow":{"type":"blockLogicTrue","id":",:%i-!@UCdeLH=5U@zMk"},"block":{"type":"blockLogicCompare","id":"`(!/%ClHy`_~?Y4R9z@K","fields":{"OP1":"EQ"},"inputs":{"A":{"shadow":{"type":"blockMathNumber","id":"BknaWjd98%5Xg/D*Z,U-","fields":{"NUM":0}},"block":{"type":"blockColor","id":"/M1CtZxw.19CJ@j%3HH:","extraState":{"optionLevel":0},"fields":{"METHOD":"COLOR_GET_COLOR"},"inputs":{"VAR":{"shadow":{"type":"variables_get_color_device","id":"}K#ytf:%4@%kubc$E^S0","fields":{"VAR":{"id":"oqaorV6y+Pgm@d-xKJXQ","name":"color sensor","type":"ColorSensor"}}}}}}},"B":{"shadow":{"type":"blockMathNumber","id":"X]1c6z[Y){ndPX7oU#qM","fields":{"NUM":0}},"block":{"type":"variables_get_color","id":"u]XC2]Hp3z1qMV5-=!tn","fields":{"COLOUR":"#c70a10","VAR":{"id":"~P^p+D;l#Veq/ovN=iQv"}}}}}}},"DO1":{"block":{"type":"blockMotorStop","id":"!$,yeQTcEk!K1?_np(lJ","inputs":{"VAR":{"shadow":{"type":"variables_get_simple_motor_device","id":"kf,cSNHcS6[;aVt`?|JW","fields":{"VAR":{"id":"941ig0ALUh8`0[_PUfg1","name":"train_motor","type":"DCMotor"}}}},"VALUE0":{"shadow":{"type":"parameters_stop_3","id":"j-K9RaDa`Lz!IO*/*`Ze","fields":{"VALUE":"Stop.COAST"}}}},"next":{"block":{"type":"blockVariableSetValue","id":"qX!o7?h]Z_LF!MW:Rt,|","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":")ji8E?NBBLLsafe4#+:I","fields":{"VAR":{"id":"Nv1[*LFg.~TO=VJ(}rCc","name":"round","type":"Any"}}}},"VALUE0":{"shadow":{"type":"blockMathNumber","id":"Amq:xExoG:sJ:$PW^wRz","fields":{"NUM":0}},"block":{"type":"blockTextLiteral","id":"?~9^4eC?w-vV#n;yeR-l","fields":{"TEXT":"not_started"}}}},"next":{"block":{"type":"blockBleBroadcast","id":"`tF!c-yZ|mpY8hIayv`6","inputs":{"VAR":{"shadow":{"type":"variables_get_ble_hub","id":"~Y8,_|r%^G%x*ai{-wVq","fields":{"VAR":{"id":"1}YO:A)/19FHF9r}-jR,","name":"white_train","type":"CityHub"}}}},"VALUE0":{"shadow":{"type":"blockMathNumber","id":"Mg+B}Bk@BGH[bU=a0i4F","fields":{"NUM":0}},"block":{"type":"blockTextLiteral","id":"p$j]~E:0*RRUz$E3~pxx","fields":{"TEXT":"straight"}}}}}}}}}},"IF2":{"shadow":{"type":"blockLogicTrue","id":"+-PHOO$mB6jV`twad/DO"},"block":{"type":"blockLogicCompare","id":"C?taa1*wyl!+n=Xs;U]u","fields":{"OP1":"EQ"},"inputs":{"A":{"shadow":{"type":"blockMathNumber","id":"BknaWjd98%5Xg/D*Z,U-","fields":{"NUM":0}},"block":{"type":"blockColor","id":",|n={y/+zO|G6)ef-06$","extraState":{"optionLevel":0},"fields":{"METHOD":"COLOR_GET_COLOR"},"inputs":{"VAR":{"shadow":{"type":"variables_get_color_device","id":"VQHpzy-6U`4Q{ojBA/;6","fields":{"VAR":{"id":"oqaorV6y+Pgm@d-xKJXQ","name":"color sensor","type":"ColorSensor"}}}}}}},"B":{"shadow":{"type":"blockMathNumber","id":"X]1c6z[Y){ndPX7oU#qM","fields":{"NUM":0}},"block":{"type":"variables_get_color","id":"Ug+kfCJn/Q^,,S1W2g$}","fields":{"COLOUR":"#0b7d2d","VAR":{"id":"Z(AXa1:s3-?M[W0vwv%V"}}}}}}},"DO2":{"block":{"type":"blockMotorStop","id":"WDJcmdr`]Ngwap|/-_$2","inputs":{"VAR":{"shadow":{"type":"variables_get_simple_motor_device","id":"y3GZ8?%1$YhlWG}^k}ES","fields":{"VAR":{"id":"941ig0ALUh8`0[_PUfg1","name":"train_motor","type":"DCMotor"}}}},"VALUE0":{"shadow":{"type":"parameters_stop_3","id":"qpeS(tP~?HWGhpv%Jik/","fields":{"VALUE":"Stop.COAST"}}}},"next":{"block":{"type":"blockWaitTime","id":"3{rpcxk[o[Q0Up`n-zZa","inputs":{"VALUE0":{"shadow":{"type":"unit_time","id":"2=FMZuR/z6[g$N/(OeT8","fields":{"VALUE0":2000}}}},"next":{"block":{"type":"blockVariableSetValue","id":"P+JhM$_i?*4v;9{7kiYW","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"^b0qLh*XgO#`z|vtcmi]","fields":{"VAR":{"id":"Nv1[*LFg.~TO=VJ(}rCc","name":"round","type":"Any"}}}},"VALUE0":{"shadow":{"type":"blockMathNumber","id":"Amq:xExoG:sJ:$PW^wRz","fields":{"NUM":0}},"block":{"type":"blockTextLiteral","id":"`hK_y[.f;UI_Xw|iU7t4","fields":{"TEXT":"green_round"}}}},"next":{"block":{"type":"blockMotorDuty","id":"*g4y|Pu;,KZL7x_wHmuH","inputs":{"VAR":{"shadow":{"type":"variables_get_simple_motor_device","id":"Ln9:U|PY^A3;gytCGxtW","fields":{"VAR":{"id":"941ig0ALUh8`0[_PUfg1","name":"train_motor","type":"DCMotor"}}}},"VALUE0":{"shadow":{"type":"unit_percent","id":"qI@h9t^gY,lIu5`s);WL","fields":{"VALUE0":50}}}},"next":{"block":{"type":"blockBleBroadcast","id":"m_31HVzUmWXX-PC9WCC@","inputs":{"VAR":{"shadow":{"type":"variables_get_ble_hub","id":"s[Rr![}slh=#IV@`iKOA","fields":{"VAR":{"id":"1}YO:A)/19FHF9r}-jR,","name":"white_train","type":"CityHub"}}}},"VALUE0":{"shadow":{"type":"blockMathNumber","id":"Mg+B}Bk@BGH[bU=a0i4F","fields":{"NUM":0}},"block":{"type":"blockTextLiteral","id":"!i]Vu}z?R).(YUm[f#[L","fields":{"TEXT":"turn"}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}]},"variables":[{"name":"white_train","id":"1}YO:A)/19FHF9r}-jR,","type":"CityHub"},{"name":"train_motor","id":"941ig0ALUh8`0[_PUfg1","type":"DCMotor"},{"name":"red","id":"*;u`)|XiO8S}.9PAj8G5","type":"ColorDef"},{"name":"orange","id":"tAUR.~uzE/bm}%Ga]93q","type":"ColorDef"},{"name":"yellow","id":"F**$kjt[etpvtSeGG[QL","type":"ColorDef"},{"name":"green","id":"TOOCKpWek)VTDJ/l^SOv","type":"ColorDef"},{"name":"cyan","id":"%PG8uE)a^YN)DVp?!W%/","type":"ColorDef"},{"name":"blue","id":";r;6-;9)B{0OFc$#}0nP","type":"ColorDef"},{"name":"violet","id":"Xa|{d[^=aPRndUoWbP_i","type":"ColorDef"},{"name":"magenta","id":"O#6V~NgR:%,B,B)H2dSt","type":"ColorDef"},{"name":"white","id":"1~pX.iZz;JU9?)=o0=S6","type":"ColorDef"},{"name":"none","id":"zoF3m]nMN995`wDwDz:a","type":"ColorDef"},{"name":"red_tile","id":"~P^p+D;l#Veq/ovN=iQv","type":"ColorDef"},{"name":"green_tile","id":"Z(AXa1:s3-?M[W0vwv%V","type":"ColorDef"},{"name":"blue_tile","id":"$prsn|t%(sJ(hshPLX.G","type":"ColorDef"},{"name":"track","id":"QG4=np+HX1:b6u4Or~u~","type":"ColorDef"},{"name":"floor","id":"rCw8;LVkk?xZTYgg!Gw8","type":"ColorDef"},{"name":"message_receive","id":"Z)*/u3i9XouLD2a]bR0t","type":"Any"},{"name":"round","id":"Nv1[*LFg.~TO=VJ(}rCc","type":"Any"},{"name":"color sensor","id":"oqaorV6y+Pgm@d-xKJXQ","type":"ColorSensor"}],"info":{"type":"pybricks","version":"1.2.3"}}
from pybricks.hubs import CityHub
from pybricks.parameters import Color, Direction, Port
from pybricks.pupdevices import ColorSensor, DCMotor
from pybricks.tools import multitask, run_task, wait

# Set up custom colors.
Color.RED_TILE = Color(358, 95, 78)
Color.GREEN_TILE = Color(138, 91, 49)
Color.BLUE_TILE = Color(219, 93, 70)
Color.TRACK = Color(173, 40, 27)
Color.FLOOR = Color(9, 30, 45)

# Set up all devices.
white_train = CityHub(broadcast_channel=1, observe_channels=[3])
color_sensor = ColorSensor(Port.B)
color_sensor.detectable_colors((Color.RED_TILE, Color.GREEN_TILE, Color.BLUE_TILE, Color.TRACK, Color.FLOOR))
train_motor = DCMotor(Port.A, Direction.CLOCKWISE)

# Initialize variables.
message_receive = 0
round2 = 0

async def subtask():
    global message_receive, round2
    while True:
        await wait(1)
        message_receive = white_train.ble.observe(3)
        if message_receive == 'start':
            if round2 == 'not_started':
                train_motor.dc(50)
                round2 = 'red_round'
                await white_train.ble.broadcast('turn')
            else:
                pass
        else:
            pass

async def subtask2():
    global round2
    while True:
        await wait(1)
        if await color_sensor.color() == Color.BLUE_TILE:
            if round2 == 'red_round':
                await white_train.ble.broadcast('straight')
            elif round2 == 'green_round':
                await white_train.ble.broadcast('start')
            elif round2 == 'not_started':
                await white_train.ble.broadcast('start')
            else:
                pass
        elif await color_sensor.color() == Color.RED_TILE:
            train_motor.stop()
            round2 = 'not_started'
            await white_train.ble.broadcast('straight')
        elif await color_sensor.color() == Color.GREEN_TILE:
            train_motor.stop()
            await wait(2000)
            round2 = 'green_round'
            train_motor.dc(50)
            await white_train.ble.broadcast('turn')
        else:
            pass

async def main():
    global round2, message_receive
    print('Hello, white train!')
    white_train.light.on(Color.GREEN)
    train_motor.dc(50)
    round2 = 'not_started'
    await white_train.ble.broadcast('turn')
    await multitask(subtask(), subtask2())


run_task(main())